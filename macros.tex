%%% This file contains definitions of various useful macros and environments %%%

% These macros employ a little dirty trick to convince LaTeX to typeset
% chapter headings sanely, without lots of empty space above them.
% Feel free to ignore.
\makeatletter
\def\@makechapterhead#1{
  {\parindent \z@ \raggedright \normalfont
   \Huge\bfseries \thechapter. #1
   \par\nobreak
   \vskip 20\p@
}}
\def\@makeschapterhead#1{
  {\parindent \z@ \raggedright \normalfont
   \Huge\bfseries #1
   \par\nobreak
   \vskip 20\p@
}}
\makeatother

% This macro defines a chapter, which is not numbered, but is included
% in the table of contents.
\def\chapwithtoc#1{
\chapter*{#1}
\addcontentsline{toc}{chapter}{#1}
}

% Draw black "slugs" whenever a line overflows, so that we can spot it easily.
\overfullrule=1mm

%%% Coloring commands
\newcommand{\ap}{\textquotesingle}
\newcommand{\parserrule}[1]{\textcolor{parserrulecolor}{#1}}
\newcommand{\lexerrule}[1]{\textcolor{lexerrulecolor}{#1}}
\newcommand{\literal}[1]{\ap\textcolor{literalcolor}{#1}\ap}
\newcommand{\regex}[1]{\textcolor{regexcolor}{#1}}

%%% Environment for inputting ANTLR code
\newenvironment{antlr}%
	{%
		\par
		\noindent
		\adjustbox{margin=3mm,bgcolor=antlrbgcolor,frame}
		\bgroup
		\varwidth
		\linewidth
		\alltt%
	}%
	{%
		\endalltt
		\endvarwidth
		\egroup%
	}
